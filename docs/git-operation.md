# Git 運用ルール

本プロジェクトでは **Gitflow** ワークフローを採用しています。

## ブランチ戦略

主要なブランチと、用途ごとの作業ブランチを以下のように定義します。

### 主要ブランチ (長期運用)

| ブランチ名    | 説明                                                                                                                       |
| :------------ | :------------------------------------------------------------------------------------------------------------------------- |
| **`main`**    | 本番環境用コード。常に安定した状態を保ち、リリースごとにタグ (`vX.Y.Z`) を付与します。ここへの直接コミットは禁止です。     |
| **`develop`** | 開発用コード。次期リリースのための最新の変更が集約されます。機能開発はこのブランチから分岐し、完了後はここへマージします。 |

### サポートブランチ (短期運用)

| ブランチ名      | 元ブランチ | マージ先          | 説明                                                                                                                                                       |
| :-------------- | :--------- | :---------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`feature/*`** | `develop`  | `develop`         | 新機能の開発やリファクタリング用。完了したらプルリクエスト (PR) を通じて `develop` にマージします。<br>例: `feature/add-login`, `feature/refactor-logging` |
| **`release/*`** | `develop`  | `main`, `develop` | リリース準備用。バージョン番号の更新や最終的なバグ修正を行います。<br>例: `release/v1.0.0`                                                                 |
| **`hotfix/*`**  | `main`     | `main`, `develop` | 本番環境で見つかった緊急バグ修正用。<br>例: `hotfix/v1.0.1`                                                                                                |

## 開発フロー

1. **機能開発の開始**: `develop` から `feature/xxx` ブランチを作成します。
2. **実装とコミット**: 変更をコミットします。
3. **プルリクエスト (PR)**: `feature/xxx` から `develop` への PR を作成します。
4. **レビューとマージ**: レビュー完了後、`develop` にマージします。
5. **リリース準備**: `develop` から `release/vX.Y.Z` を作成し、バージョンなどを更新・確定します。
6. **リリース**: `release/vX.Y.Z` を `main` と `develop` にマージし、`main` にタグを打ちます。

## コミットメッセージ

可能な限り以下の形式（Conventional Commits）に従ってください。

```text
<type>(<scope>): <subject>

<body>
```

- **feat**: 新機能
- **fix**: バグ修正
- **docs**: ドキュメントのみの変更
- **style**: コードの意味に影響しない変更（空白、フォーマットなど）
- **refactor**: バグ修正も機能追加も行わないコード変更
- **perf**: パフォーマンスを向上させるコード変更
- **test**: テストの追加・修正
- **chore**: ビルドプロセスやツールの変更など

例: `feat(auth): ログイン機能にGoogle認証を追加`

### 特記事項

- **WIPコミット**: 作業ブランチ（`feature/*`）内では、一時的な保存として `wip` というコミットメッセージを使用しても構いません。ただし、`develop` 等へマージする前（プルリクエスト時）には、これらを適切なコミット（`feat`, `fix` 等）にSquashして整理してください。
- **Husky & Commitlint**: コミット時にメッセージの形式チェック（Conventional Commits）が自動実行されます。不適切な形式の場合はコミットが拒否されます。
